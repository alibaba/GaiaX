var __extends=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),__assign=this&&this.__assign||function(){return __assign=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},__assign.apply(this,arguments)},__awaiter=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(o,i){function s(e){try{c(a.next(e))}catch(t){i(t)}}function r(e){try{c(a.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}c((a=a.apply(e,t||[])).next())}))},__generator=this&&this.__generator||function(e,t){var n,a,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(r){return function(c){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,r[0]&&(s=0)),s;)try{if(n=1,a&&(o=2&r[0]?a.return:r[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,r[1])).done)return o;switch(a=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,a=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(c){r=[6,c],a=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}};function __gaiaxjs_require__(e){if(!__globalThis.__HMR__){var t=__gaiaxjs_module_cache__[e];if(void 0!==t)return t.exports}var n=__gaiaxjs_module_cache__[e]={exports:{}};return __gaiaxjs_modules__[e].call(n.exports,n,n.exports,__gaiaxjs_require__),n.exports}Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),n=t.length,a=new Array(n);n--;)a[n]=[t[n],e[t[n]]];return a}),Object.values||(Object.values=function(e){if(e!==Object(e))throw new TypeError("Object.values called on a non-object");var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(e[t]);return n}),__globalThis.__gaiaxjs_exports__={},__globalThis.exports=__globalThis.__gaiaxjs_exports__,__globalThis.__gaiaxjs_modules__={},__globalThis.__gaiaxjs_module_cache__={};var pEventData=new WeakMap;function ped(e){var t=pEventData.get(e);if(null==t)throw new Error("'this' is expected an Event object, but got "+e);return t}var GaiaXJSEvent=function(){function e(e){pEventData.set(this,e)}return Object.defineProperty(e.prototype,"templateId",{get:function(){return ped(this).templateId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"instanceId",{get:function(){return ped(this).instanceId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"animationId",{get:function(){return ped(this).animationId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"modalId",{get:function(){return ped(this).modalId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return ped(this).type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timeStamp",{get:function(){return ped(this).timeStamp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"targetId",{get:function(){return ped(this).targetId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"targetType",{get:function(){return ped(this).targetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"targetSubType",{get:function(){return ped(this).targetSubType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsetX",{get:function(){return ped(this).offsetX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsetY",{get:function(){return ped(this).offsetY},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return ped(this).userData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPage",{get:function(){return ped(this).isPage},enumerable:!1,configurable:!0}),e}(),listenersMap=new WeakMap;function getListeners(e){var t=listenersMap.get(e);if(null==t)throw new TypeError("'this' is expected an EventTarget object, but got another value.");return t}var sequenceNumber=1,GaiaXJSAnimation=function(){function e(e,t){this.id="",e&&e._id&&(this.id=e._id),this.effect=e,e&&(e._animation=this),this._timeline=t,this._sequenceNumber=sequenceNumber++,this._holdTime=0,this._paused=!1,this._isGroup=!1,this._animation=null,this._childAnimations=[],this._callback=null,this._oldPlayState="idle"}return e.prototype.play=function(){return new Promise((function(e,t){e()}))},e.prototype.cancel=function(){NativeAnimation.cancel({type:this.effect.type,id:this.id,contextId:__globalThis.__CONTEXT_ID__})},e.prototype.dispatchEvent=function(e){this[e.type]&&this[e.type](e)},e}(),GaiaXJSLottieTiming=function(){function e(){this._autoplay=!0,this._loop=!0}return Object.defineProperty(e.prototype,"autoplay",{get:function(){return this._autoplay},set:function(e){this._autoplay=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._loop},set:function(e){this._loop=e},enumerable:!1,configurable:!0}),e}(),GaiaXJSEffectTiming=function(){function e(){this._delay=0,this._endDelay=0,this._fill="forwards",this._iterationStart=0,this._iterations=1,this._duration=0,this._playbackRate=1,this._direction="normal",this._easing="linear"}return e.prototype._setMember=function(e,t){this["_"+e]=t},Object.defineProperty(e.prototype,"playbackRate",{get:function(){return this._playbackRate},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){return this._delay},set:function(e){this._setMember("delay",e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endDelay",{get:function(){return this._endDelay},set:function(e){this._setMember("endDelay",e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fill},set:function(e){this._setMember("fill",e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iterationStart",{get:function(){return this._iterationStart},set:function(e){this._setMember("iterationStart",e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this._duration},set:function(e){this._setMember("duration",e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},set:function(e){this._setMember("direction",e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"easing",{get:function(){return this._easing},set:function(e){this._setMember("easing",e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iterations",{get:function(){return this._iterations},set:function(e){this._setMember("iterations",e)},enumerable:!1,configurable:!0}),e}(),GaiaXJSKeyframeList=function(){function e(e,t){this._frames=this.normalizeKeyframes(e,t)}return e.prototype.normalizeKeyframes=function(e,t){if(null==e)return[];for(var n=(Array.isArray(e)?e:this.convertToArrayForm(e,t)).map((function(e){var t={};for(var n in e){var a=e[n];if("offset"==n){if(null!=a){if(a=Number(a),!isFinite(a))throw new TypeError("Keyframe offsets must be numbers.");if(a<0||a>1)throw new TypeError("Keyframe offsets must be between 0 and 1.")}}else a=""+a;t[n]=a}return null==t.offset&&(t.offset=null),null==t.easing&&(t.easing="linear"),t})),a=!0,o=-1/0,i=0;i<n.length;i++){var s=n[i].offset;if(null!=s){if(s<o)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");o=s}else a=!1}return n=n.filter((function(e){return e.offset>=0&&e.offset<=1})),a||function(){var e=n.length;null==n[e-1].offset&&(n[e-1].offset=1),e>1&&null==n[0].offset&&(n[0].offset=0);for(var t=0,a=n[0].offset,o=1;o<e;o++){var i=n[o].offset;if(null!=i){for(var s=1;s<o-t;s++)n[t+s].offset=a+(i-a)*s/(o-t);t=o,a=i}}}(),n},e.prototype.convertToArrayForm=function(e,t){var n=[];for(var a in e)if(!(a in["easing","offset","composite"])){var o=e[a];Array.isArray(o)||(o=[o]);for(var i=void 0,s=o.length,r=0;r<s;r++)(i={}).offset="offset"in e?e.offset:1==s?1:r/(s-1),"easing"in e&&(i.easing=e.easing),null==i.easing&&(i.easing=t.easing),i[a]=o[r],n.push(i)}return n.sort((function(e,t){return e.offset-t.offset})),n},e}(),GaiaXJSLottieEffect=function(){function e(e,t,n,a){this.type="lottie",this.target=e,this._animationData=t.animationData,this._path=t.path,this._parent=null,this._id=a,this._timingInput=null,this._timing=this.makeTiming(t),this._normalizedKeyframes=null,this._keyframes=null,this.activeDuration=0}return e.prototype.makeTiming=function(e){var t=new GaiaXJSLottieTiming;return t.fill="both",t.duration="auto",t},e}(),GaiaXJSKeyframeEffect=function(){function e(e,t,n,a){this.type="keyframe",this.target=e,this._parent=null,this._id=a;var o=this.numericTimingToObject(n);this._timingInput=this.cloneTimingInput(o),this._timing=this.normalizeTimingInput(o),this.timing=this.makeTiming(o,!1,this),this.timing._effect=this,this._normalizedKeyframes=new GaiaXJSKeyframeList(t,this.timing),this._keyframes=t,this.activeDuration=this.calculateActiveDuration(this._timing)}return e.prototype.repeatedDuration=function(e){return 0===e.duration||0===e.iterations?0:e.duration*e.iterations},e.prototype.calculateActiveDuration=function(e){return Math.abs(this.repeatedDuration(e)/e.playbackRate)},e.prototype.numericTimingToObject=function(e){return"number"==typeof e&&(e=isNaN(e)?{duration:0}:{duration:e}),e},e.prototype.cloneTimingInput=function(e){if("number"==typeof e)return e;var t={};for(var n in e)t[n]=e[n];return t},e.prototype.normalizeTimingInput=function(e,t){return e=this.numericTimingToObject(e),this.makeTiming(e,t)},e.prototype.makeTiming=function(e,t,n){var a=new GaiaXJSEffectTiming;return t&&(a.fill="both",a.duration="auto"),"number"!=typeof e||isNaN(e)?void 0!==e&&Object.getOwnPropertyNames(e).forEach((function(t){if("auto"!=e[t]){if(("number"==typeof a[t]||"duration"==t)&&("number"!=typeof e[t]||isNaN(e[t])))return;if("fill"==t&&-1==fills.indexOf(e[t]))return;if("direction"==t&&-1==directions.indexOf(e[t]))return;a[t]=e[t]}})):a.duration=e,a},e}(),GaiaXJSGroupEffect=function(e){this.type="group",this._id="group_id_".concat(__globalThis.__WEB_ANIMATION_ID__++),this.effects=e},GaiaXJSSequenceEffect=function(e){this.type="sequence",this._id="sequence_id_".concat(__globalThis.__WEB_ANIMATION_ID__++),this.effects=e},GaiaXJSAnimatableTarget=function(){function e(){}return e.prototype.animate=function(e,t){var n=t&&t.id||"id_".concat(__globalThis.__WEB_ANIMATION_ID__++);return timeline.play(new GaiaXJSKeyframeEffect(this,e,t,n))},e.prototype.animateLottie=function(e,t){var n=t&&t.id||"lottie_id_".concat(__globalThis.__LOTTIE_ANIMATION_ID__++);return timeline.play(new GaiaXJSLottieEffect(this,e,t,n))},e.prototype.getAnimations=function(){return timeline.getAnimations().filter(function(e){return null!==e.effect&&e.effect.target==this}.bind(this))},e}(),GaiaXJSAnimationTimeline=function(){function e(){this._animations=[],this.currentTime=void 0}return e.prototype.normalizeKeyframeEffect=function(e){var t=[];if(e instanceof GaiaXJSKeyframeEffect)t=e._normalizedKeyframes._frames;else if(e instanceof GaiaXJSGroupEffect||e instanceof GaiaXJSSequenceEffect)for(var n=0;n<e.effects.length;n++)t=t.concat(this.normalizeKeyframeEffect(e.effects[n]));return Object.assign({},{target:{targetId:e.target.targetId,targetType:e.target.targetType,targetSubType:e.target.targetSubType,templateId:e.target.templateId,instanceId:e.target.instanceId}},{keyframes:t},{timing:{duration:e._timing.duration,delay:e._timing.delay,fill:e._timing.fill,playbackRate:e._timing.playbackRate,easing:e._timing.easing,iterationStart:e._timing.iterationStart,iterations:e._timing.iterations,direction:e._timing.direction,endDelay:e._timing.endDelay}})},e.prototype.normalizeLottieEffect=function(e){return Object.assign({},{target:{targetId:e.target.targetId,targetType:e.target.targetType,targetSubType:e.target.targetSubType,templateId:e.target.templateId,instanceId:e.target.instanceId}},{animationData:e._animationData,path:e._path},{timing:{loop:e._timing.loop,autoplay:e._timing.autoplay}})},e.prototype.normalizeEffects=function(e){if(e instanceof GaiaXJSGroupEffect||e instanceof GaiaXJSSequenceEffect){var t=[];return e.effects.forEach((function(e){t.push(this.normalizeKeyframeEffect(e))}),this),t}return e instanceof GaiaXJSKeyframeEffect?[this.normalizeKeyframeEffect(e)]:e instanceof GaiaXJSLottieEffect?[this.normalizeLottieEffect(e)]:void 0},e.prototype.play=function(e){var t=this,n=new GaiaXJSAnimation(e,this);return this._animations.push(n),NativeAnimation.play({type:e.type,id:n.id,contextId:__globalThis.__CONTEXT_ID__,effects:this.normalizeEffects(e)}).then((function(){})).catch((function(e){t._animations.splice(t._animations.indexOf(n),1),console.error(e)})),n},e.prototype.getAnimations=function(){return this._animations},e.prototype._dispatchAnimationEvent=function(e){this._animations.forEach((function(t){t.id==e.animationId&&t.dispatchEvent(e)}))},e}(),GaiaXJSEventTarget=function(e){function t(e){var t=this;for(var n in e)if(Object.hasOwnProperty.call(e,n)){var a=e[n];t["__".concat(n,"__")]=a}return t.__style__=new Style(e),listenersMap.set(t,new Map),t}return __extends(t,GaiaXJSAnimatableTarget),Object.defineProperty(t.prototype,"style",{get:function(){return this.__style__},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"targetId",{get:function(){return this.__targetId__},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"targetType",{get:function(){return this.__targetType__},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"targetSubType",{get:function(){return this.__targetSubType__},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"templateId",{get:function(){return this.__templateId__},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"instanceId",{get:function(){return this.__instanceId__},enumerable:!1,configurable:!0}),t.prototype.addEventListener=function(e,t,n){var a=getListeners(this);null!=a.get(e)&&a.delete(e),NativeEvent.addEventListener({templateId:this.templateId,targetId:this.targetId,instanceId:this.instanceId,eventType:e,option:n}).then((function(){var n={listener:t,next:null};a.set(e,n)}))},t.prototype.removeEventListener=function(e,t){var n=this;NativeEvent.removeEventListener({templateId:this.templateId,targetId:this.targetId,instanceId:this.instanceId,eventType:e}).then((function(){getListeners(n).delete(e)}))},t.prototype.dispatchEvent=function(e){var t=getListeners(this),n=e.type,a=t.get(n);if(null==a)return!0;"function"==typeof a.listener&&a.listener.call(this,e)},t.prototype.getCoordinate=function(){return NativeTarget.getElementCoordinateByData({templateId:this.templateId,targetId:this.targetId,instanceId:this.instanceId,targetType:this.targetType,targetSubType:this.targetSubType})},t}(),cListenersMap=new WeakMap;function getCListeners(e){var t=cListenersMap.get(e);if(null==t)throw new TypeError("'this' is expected an EventTarget object, but got another value.");return t}var nativeListenersMap=new WeakMap;function getNativeListeners(e){var t=nativeListenersMap.get(e);if(null==t)throw new TypeError("'this' is expected an EventTarget object, but got another value.");return t}var GaiaXJSComponentTarget=function(){function e(e){for(var t in e)if(Object.hasOwnProperty.call(e,t)){var n=e[t];this["__".concat(t,"__")]=n}}return Object.defineProperty(e.prototype,"componentId",{get:function(){return this.__componentId__},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"componentInstanceId",{get:function(){return this.__componentInstanceId__},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"componentVersion",{get:function(){return this.__componentVersion__},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"templateId",{get:function(){return this.__componentId__},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"instanceId",{get:function(){return this.__componentInstanceId__},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"templateVersion",{get:function(){return this.__componentVersion__},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageId",{get:function(){return this.__pageId__},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageInstanceId",{get:function(){return this.__pageInstanceId__},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageVersion",{get:function(){return this.__pageVersion__},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bizId",{get:function(){return this.__bizId__},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return this.__ref__},set:function(e){this.__ref__=e},enumerable:!1,configurable:!0}),e.prototype.bindData=function(e){this.__data__=e},e.prototype.getBoundData=function(){return this.__data__},Object.defineProperty(e.prototype,"page",{get:function(){var e=this.pageInstanceId||__globalThis.currentPageInstanceId;if(e)return IMs.getPage(e)},enumerable:!1,configurable:!0}),e}(),__Component__=function(e){function t(t,n){var a=e.call(this,{})||this;if(a.__state__=t.state||{},a.__onDataInit__=t.onDataInit,a.__onReady__=t.onReady,a.__onShow__=t.onShow,a.__onHide__=t.onHide,a.__onDestroy__=t.onDestroy,a.__onReuse__=t.onReuse,a.__onLoadMore__=t.onLoadMore,a.__onScroll__=t.onScroll,a.__onScrollStart__=t.onScrollStart,a.__onScrollEnd__=t.onScrollEnd,a.__bizId__=n&&n.bizId,a.__componentId__=n&&n.templateId,a.__componentVersion__=n&&n.templateVersion||"-1",a.__componentInstanceId__=n&&n.instanceId||0,a.__pageId__=n&&n.pageId,a.__pageInstanceId__=n&&n.pageInstanceId,a.__pageVersion__=n&&n.pageVersion,t)for(var o in t){var i=t[o];"state"!=o&&"onReady"!=o&&"onShow"!=o&&"onHide"!=o&&"onDestroy"!=o&&"onReuse"!=o&&"onLoadMore"!=o&&"onScroll"!=o&&"onScrollStart"!=o&&"onScrollEnd"!=o&&(a[o]=i)}return a.targets={},cListenersMap.set(a,new Map),nativeListenersMap.set(a,new Map),a}return __extends(t,e),Object.defineProperty(t.prototype,"index",{get:function(){return gaiax.getComponentIndex(__assign({},this.getMetaInfo()))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this.__state__},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return gaiax.getData(__assign({},this.getMetaInfo()))},enumerable:!1,configurable:!0}),t.prototype.getMetaInfo=function(){var e={templateId:this.componentId,instanceId:this.componentInstanceId};return this.templateVersion&&(e.templateVersion=this.componentVersion),this.pageId&&(e.pageId=this.pageId),this.pageInstanceId&&(e.pageInstanceId=this.pageInstanceId),this.pageVersion&&(e.pageVersion=this.pageVersion),e},t.prototype.setData=function(e,t){gaiax.setData(e,this.getMetaInfo(),(function(){t&&t()}))},t.prototype.setDataWithReLayout=function(e,t,n){gaiax.setData(e,__assign(__assign({},this.getMetaInfo()),{relayout:!0,animated:!!t}),(function(){n&&n()}))},t.prototype.setState=function(e,t){if("object"==typeof e){var n=Object.assign(this.__state__,e||{})||{};this.__state__=n,setTimeout((function(){t&&t()}),0)}},t.prototype.onDataInit=function(e){try{if(__globalThis&&__globalThis.__DEV__&&console.log("[Component]: componentInstanceId=".concat(this.componentInstanceId,", bizId=").concat(this.bizId,", componentId=").concat(this.componentId,", componentVersion=").concat(this.componentVersion," onDataInit")),this.__onDataInit__)return this.__onDataInit__.call(this,e)}catch(t){console.error(__assign(__assign({},this.getMetaInfo()),{bizId:this.bizId,message:t.message,stack:t.stack}))}},t.prototype.onReuse=function(){try{__globalThis&&__globalThis.__DEV__&&console.log("[Component]: componentInstanceId=".concat(this.componentInstanceId,", bizId=").concat(this.bizId,", componentId=").concat(this.componentId,", componentVersion=").concat(this.componentVersion," onReuse")),this.__onReuse__&&this.__onReuse__.call(this)}catch(e){console.error(__assign(__assign({},this.getMetaInfo()),{bizId:this.bizId,message:e.message,stack:e.stack}))}},t.prototype.onReady=function(){try{__globalThis&&__globalThis.__DEV__&&console.log("[Component]: componentInstanceId=".concat(this.componentInstanceId,", bizId=").concat(this.bizId,", componentId=").concat(this.componentId,", componentVersion=").concat(this.componentVersion," onReady")),this.__onReady__&&this.__onReady__.call(this)}catch(e){console.error(__assign(__assign({},this.getMetaInfo()),{bizId:this.bizId,message:e.message,stack:e.stack}))}},t.prototype.onShow=function(){try{__globalThis&&__globalThis.__DEV__&&console.log("[Component]: componentInstanceId=".concat(this.componentInstanceId,", bizId=").concat(this.bizId,", componentId=").concat(this.componentId,", componentVersion=").concat(this.componentVersion," onShow")),this.__onShow__&&this.__onShow__.call(this)}catch(e){console.error(__assign(__assign({},this.getMetaInfo()),{bizId:this.bizId,message:e.message,stack:e.stack}))}},t.prototype.onHide=function(){try{__globalThis&&__globalThis.__DEV__&&console.log("[Component]: componentInstanceId=".concat(this.componentInstanceId,", bizId=").concat(this.bizId,", componentId=").concat(this.componentId,", componentVersion=").concat(this.componentVersion," onHide")),this.__onHide__&&this.__onHide__.call(this)}catch(e){console.error(__assign(__assign({},this.getMetaInfo()),{bizId:this.bizId,message:e.message,stack:e.stack}))}},t.prototype.onDestroy=function(){try{__globalThis&&__globalThis.__DEV__&&console.log("[Component]: componentInstanceId=".concat(this.componentInstanceId,", bizId=").concat(this.bizId,", componentId=").concat(this.componentId,", componentVersion=").concat(this.componentVersion," onDestroy")),this.__onDestroy__&&this.__onDestroy__.call(this)}catch(e){console.error(__assign(__assign({},this.getMetaInfo()),{bizId:this.bizId,message:e.message,stack:e.stack}))}IMs.removeComponent(this)},t.prototype.onLoadMore=function(e){try{__globalThis&&__globalThis.__DEV__&&console.log("[Component]: componentInstanceId=".concat(this.componentInstanceId,", bizId=").concat(this.bizId,", componentId=").concat(this.componentId,", componentVersion=").concat(this.componentVersion," onLoadMore")),this.__onLoadMore__&&this.__onLoadMore__.call(this,e)}catch(t){console.error(__assign(__assign({},this.getMetaInfo()),{bizId:this.bizId,message:t.message,stack:t.stack}))}},t.prototype.onScroll=function(e){try{__globalThis&&__globalThis.__DEV__&&console.log("[Component]: componentInstanceId=".concat(this.componentInstanceId,", bizId=").concat(this.bizId,", componentId=").concat(this.componentId,", componentVersion=").concat(this.componentVersion," onScroll")),this.__onScroll__&&this.__onScroll__.call(this,e)}catch(t){console.error(__assign(__assign({},this.getMetaInfo()),{bizId:this.bizId,message:t.message,stack:t.stack}))}},t.prototype.onScrollStart=function(e){try{__globalThis&&__globalThis.__DEV__&&console.log("[Component]: componentInstanceId=".concat(this.componentInstanceId,", bizId=").concat(this.bizId,", componentId=").concat(this.componentId,", componentVersion=").concat(this.componentVersion," onScrollStart")),this.__onScrollStart__&&this.__onScrollStart__.call(this,e)}catch(t){console.error(__assign(__assign({},this.getMetaInfo()),{bizId:this.bizId,message:t.message,stack:t.stack}))}},t.prototype.onScrollEnd=function(e){try{__globalThis&&__globalThis.__DEV__&&console.log("[Component]: componentInstanceId=".concat(this.componentInstanceId,", bizId=").concat(this.bizId,", componentId=").concat(this.componentId,", componentVersion=").concat(this.componentVersion," onScrollEnd")),this.__onScrollEnd__&&this.__onScrollEnd__.call(this,e)}catch(t){console.error(__assign(__assign({},this.getMetaInfo()),{bizId:this.bizId,message:t.message,stack:t.stack}))}},t.prototype.getElementById=function(e){var t,n=NativeTarget.getElementByData(__assign(__assign({},this.getMetaInfo()),{targetId:e}));return null!=n&&(null==this.targets["".concat(this.componentInstanceId,"_").concat(e)]?(t=new GaiaXJSEventTarget(__assign(__assign({},this.getMetaInfo()),{targetId:e,targetType:n.targetType,targetSubType:n.targetSubType})),this.targets["".concat(this.componentInstanceId,"_").concat(e)]=t):t=this.targets["".concat(this.componentInstanceId,"_").concat(e)]),t},t.prototype.dispatchEvent=function(e){if(null!=e)if(e.targetId){var t=e.targetId;e.targetId&&this.targets["".concat(this.componentInstanceId,"_").concat(t)]instanceof GaiaXJSEventTarget&&this.targets["".concat(this.componentInstanceId,"_").concat(t)].dispatchEvent(e)}else{var n=getCListeners(this),a=e.type,o=n.get(a);if(null==o)return!0;"function"==typeof o.listener&&o.listener.call(this,e)}},t.prototype.addEventListener=function(e,t){var n=this,a=getCListeners(this);null!=a.get(e)&&a.delete(e);var o={listener:t,next:null};a.set(e,o);var i=sticky.getStickyEvent(e);null!=i&&i.length>0&&i.forEach((function(e){null!=e.instanceId&&e.instanceId!=n.pageInstanceId||n.dispatchEvent(e)}))},t.prototype.removeEventListener=function(e,t){getCListeners(this).delete(e)},t.prototype.refreshPage=function(e){OneArch.refresh(__assign(__assign({},this.getMetaInfo()),{type:"page",params:e}))},t.prototype.refreshCard=function(e){OneArch.refresh(__assign(__assign({},this.getMetaInfo()),{type:"card",params:e}))},t.prototype.refreshComponent=function(e){OneArch.refresh(__assign(__assign({},this.getMetaInfo()),{type:"component",params:e}))},t.prototype.scrollTo=function(e){OneArch.scrollTo(__assign(__assign({},this.getMetaInfo()),{params:e}))},t.prototype.dispatchNativeEvent=function(e){if(null!=e){var t=getNativeListeners(this),n=e.type,a=t.get(n);if(null==a)return!0;"function"==typeof a.listener&&a.listener.call(this,e)}},t.prototype.addNativeEventListener=function(e,t){if(NativeEvent.addNativeEventListener(__assign(__assign({},this.getMetaInfo()),{contextId:__globalThis.__CONTEXT_ID__,type:e}))){var n=getNativeListeners(this);null!=n.get(e)&&n.delete(e);var a={listener:t,next:null};n.set(e,a)}},t.prototype.removeNativeEventListener=function(e){NativeEvent.removeNativeEventListener(__assign(__assign({},this.getMetaInfo()),{contextId:__globalThis.__CONTEXT_ID__,type:e}))&&getNativeListeners(this).delete(e)},t.prototype.getItemAtIndex=function(e){var t=gaiax.getItemAtIndex(__assign(__assign({},this.getMetaInfo()),{index:e}));if(t&&t.instanceId)return IMs.getComponent(t.instanceId)},t}(GaiaXJSComponentTarget);function Component(e,t){if(e&&t&&"object"==typeof e&&"object"==typeof t){var n=new __Component__(e,t);IMs.insertComponent(n,n.pageInstanceId)}}var GaiaXJSModal=function(){function e(e){this.modalId=__globalThis.__MODAL_ID__++,this._data=e&&("object"==typeof e?Object.assign({},e):void 0)||{}}return e.prototype.present=function(){var e=this;return new Promise((function(t,n){gaiax.presentModal(Object.assign({contextId:__globalThis.__CONTEXT_ID__},e._data,{modalId:e.modalId})).then((function(){t()})).catch((function(e){n(e)}))}))},e.prototype.dismiss=function(){var e=this;return new Promise((function(t,n){gaiax.dismissModal(Object.assign({contextId:__globalThis.__CONTEXT_ID__},e._data,{modalId:e.modalId})).then((function(){t()})).catch((function(e){n(e)}))}))},e.prototype.dispatchEvent=function(e){this[e.type]&&this[e.type](e)},e}(),__Page__=function(){function e(e,t){if(this.__state__=e.state||{},this.__onLoad__=e.onLoad,this.__onReady__=e.onReady,this.__onShow__=e.onShow,this.__onHide__=e.onHide,this.__onUnload__=e.onUnload,this.__onPageScroll__=e.onPageScroll,this.__onReachBottom__=e.onReachBottom,this.__bizId__=t&&t.bizId,this.__pageId__=t&&t.templateId,this.__pageVersion__=t&&t.templateVersion||"-1",this.__pageInstanceId__=t&&t.instanceId||0,e)for(var n in e){var a=e[n];"state"!=n&&"onReady"!=n&&"onShow"!=n&&"onHide"!=n&&"onLoad"!=n&&"onUnload"!=n&&"onPageScroll"!=n&&"onReachBottom"!=n&&(this[n]=a)}this.targets={},this._modals=[],cListenersMap.set(this,new Map),nativeListenersMap.set(this,new Map),__globalThis.currentPageInstanceId=this.__pageInstanceId__}return Object.defineProperty(e.prototype,"pageId",{get:function(){return this.__pageId__},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageVersion",{get:function(){return this.__pageVersion__},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageInstanceId",{get:function(){return this.__pageInstanceId__},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bizId",{get:function(){return this.__bizId__},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this.__data__},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this.__state__},enumerable:!1,configurable:!0}),e.prototype.setBackgroundColor=function(e){NativePage.setBackgroundColor({pageId:this.pageId,pageInstanceId:this.pageInstanceId,pageVersion:this.pageVersion,backgroundColor:e})},e.prototype.setStatusBarBlack=function(e){NativePage.setStatusBarBlack({pageId:this.pageId,pageInstanceId:this.pageInstanceId,pageVersion:this.pageVersion,black:e})},e.prototype.setData=function(e,t){this.__data__=e,setTimeout((function(){t&&t()}),0)},e.prototype.setState=function(e,t){if("object"==typeof e){var n=Object.assign(this.__state__,e||{})||{};this.__state__=n,setTimeout((function(){t&&t()}),0)}},e.prototype.onLoad=function(e){try{__globalThis&&__globalThis.__DEV__&&console.log("[Page]: pageInstanceId=".concat(this.pageInstanceId,", bizId=").concat(this.bizId,", pageId=").concat(this.pageId,", pageVersion=").concat(this.pageVersion," onLoad")),this.__onLoad__&&this.__onLoad__.call(this,e)}catch(t){console.error({pageId:this.pageId,pageVersion:this.pageVersion,pageInstanceId:this.pageInstanceId,bizId:this.bizId,message:t.message,stack:t.stack})}},e.prototype.onUnload=function(){try{__globalThis&&__globalThis.__DEV__&&console.log("[Page]: pageInstanceId=".concat(this.pageInstanceId,", bizId=").concat(this.bizId,", pageId=").concat(this.pageId,", pageVersion=").concat(this.pageVersion," onUnload")),this.__onUnload__&&this.__onUnload__.call(this)}catch(e){console.error({pageId:this.pageId,pageVersion:this.pageVersion,pageInstanceId:this.pageInstanceId,bizId:this.bizId,message:e.message,stack:e.stack})}IMs.removePage(this)},e.prototype.onShow=function(){try{__globalThis&&__globalThis.__DEV__&&console.log("[Page]: pageInstanceId=".concat(this.pageInstanceId,", bizId=").concat(this.bizId,", pageId=").concat(this.pageId,", pageVersion=").concat(this.pageVersion," onShow")),this.__onShow__&&this.__onShow__.call(this)}catch(e){console.error({pageId:this.pageId,pageVersion:this.pageVersion,pageInstanceId:this.pageInstanceId,bizId:this.bizId,message:e.message,stack:e.stack})}},e.prototype.onHide=function(){try{__globalThis&&__globalThis.__DEV__&&console.log("[Page]: pageInstanceId=".concat(this.pageInstanceId,", bizId=").concat(this.bizId,", pageId=").concat(this.pageId,", pageVersion=").concat(this.pageVersion," onHide")),this.__onHide__&&this.__onHide__.call(this)}catch(e){console.error({pageId:this.pageId,pageVersion:this.pageVersion,pageInstanceId:this.pageInstanceId,bizId:this.bizId,message:e.message,stack:e.stack})}},e.prototype.onPageScroll=function(e){try{__globalThis&&__globalThis.__DEV__&&console.log("[Page]: pageInstanceId=".concat(this.pageInstanceId,", bizId=").concat(this.bizId,", pageId=").concat(this.pageId,", pageVersion=").concat(this.pageVersion," onPageScroll")),this.__onPageScroll__&&this.__onPageScroll__.call(this,e)}catch(t){console.error({pageId:this.pageId,pageVersion:this.pageVersion,pageInstanceId:this.pageInstanceId,bizId:this.bizId,message:t.message,stack:t.stack})}},e.prototype.onReachBottom=function(){try{__globalThis&&__globalThis.__DEV__&&console.log("[Page]: pageInstanceId=".concat(this.pageInstanceId,", bizId=").concat(this.bizId,", pageId=").concat(this.pageId,", pageVersion=").concat(this.pageVersion," onReachBottom")),this.__onReachBottom__&&this.__onReachBottom__.call(this)}catch(e){console.error({pageId:this.pageId,pageVersion:this.pageVersion,pageInstanceId:this.pageInstanceId,bizId:this.bizId,message:e.message,stack:e.stack})}},e.prototype.onReady=function(){try{__globalThis&&__globalThis.__DEV__&&console.log("[Page]: pageInstanceId=".concat(this.pageInstanceId,", bizId=").concat(this.bizId,", pageId=").concat(this.pageId,", pageVersion=").concat(this.pageVersion," onReady")),this.__onReady__&&this.__onReady__.call(this)}catch(e){console.error({pageId:this.pageId,pageVersion:this.pageVersion,pageInstanceId:this.pageInstanceId,bizId:this.bizId,message:e.message,stack:e.stack})}},e.prototype.refresh=function(e){var t=this;return new Promise((function(n,a){return __awaiter(t,void 0,void 0,(function(){var t,o;return __generator(this,(function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),e?[4,this.batchCreateComponent(e)]:[3,3];case 1:return t=i.sent(),[4,this.batchReplaceComponent(t)];case 2:i.sent(),i.label=3;case 3:return n(),[3,5];case 4:return o=i.sent(),a(o),[3,5];case 5:return[2]}}))}))}))},e.prototype.showFloatingView=function(e){gaiax.showFloatingView({pageId:this.pageId,pageInstanceId:this.pageInstanceId,pageVersion:this.pageVersion,params:e})},e.prototype.hideFloatingView=function(e){gaiax.hideFloatingView({pageId:this.pageId,pageInstanceId:this.pageInstanceId,pageVersion:this.pageVersion,params:e})},e.prototype.viewIsVisibleInPage=function(e){var t=this;return new Promise((function(n,a){NativePage.viewIsVisibleInPage({pageId:t.pageId,pageInstanceId:t.pageInstanceId,componentId:e.templateId,componentInstanceId:e.instanceId,targetId:e.targetId}).then((function(e){n(e)})).catch((function(e){a(e)}))}))},e.prototype.addEventListener=function(e,t){var n=this,a=getCListeners(this);null!=a.get(e)&&a.delete(e);var o={listener:t,next:null};a.set(e,o);var i=sticky.getStickyEvent(e);null!=i&&i.length>0&&i.forEach((function(e){null!=e.instanceId&&e.instanceId!=n.pageInstanceId||n.dispatchEvent(e)}))},e.prototype.removeEventListener=function(e,t){getCListeners(this).delete(e)},e.prototype.dispatchEvent=function(e){if(null!=e)if(e.targetId){var t=e.targetId;e.targetId&&this.targets["".concat(this.pageInstanceId,"_").concat(t)]instanceof GaiaXJSEventTarget&&this.targets["".concat(this.pageInstanceId,"_").concat(t)].dispatchEvent(e)}else{var n=getCListeners(this),a=e.type,o=n.get(a);if(null==o)return!0;"function"==typeof o.listener&&o.listener.call(this,e)}},e.prototype.createComponent=function(e){var t=this;return new Promise((function(n,a){NativePage.createComponentByData({componentId:e,pageId:t.pageId,pageInstanceId:t.pageInstanceId,pageVersion:t.pageVersion}).then((function(e){var a=new GaiaXJSComponentTarget({pageId:t.pageId,pageInstanceId:t.pageInstanceId,pageVersion:t.pageVersion,componentId:e.componentId,componentInstanceId:e.componentInstanceId,componentVersion:e.componentVersion});n(a)})).catch((function(e){a(e)}))}))},e.prototype.addComponent=function(e){var t=this;return new Promise((function(n,a){var o={pageId:t.pageId,pageInstanceId:t.pageInstanceId,pageVersion:t.pageVersion,componentId:e.componentId,componentInstanceId:e.componentInstanceId,componentVersion:e.componentVersion,data:e.getBoundData()};e.ref&&(o.componentRef=e.ref),NativePage.addComponentByData(o).then((function(){IMs.insertComponent(e,t.pageInstanceId),n()})).catch((function(e){a(e)}))}))},e.prototype.updateComponent=function(e){var t=this;return new Promise((function(n,a){var o={pageId:t.pageId,pageInstanceId:t.pageInstanceId,pageVersion:t.pageVersion,componentId:e.componentId,componentInstanceId:e.componentInstanceId,componentVersion:e.componentVersion,data:e.getBoundData()};e.ref&&(o.componentRef=e.ref),NativePage.updateComponentByData(o).then((function(){n()})).catch((function(e){a(e)}))}))},e.prototype.removeComponent=function(e){var t=this;return new Promise((function(n,a){var o={pageId:t.pageId,pageInstanceId:t.pageInstanceId,pageVersion:t.pageVersion,componentId:e.componentId,componentInstanceId:e.componentInstanceId,componentVersion:e.componentVersion};e.ref&&(o.componentRef=e.ref),NativePage.removeComponentByData(o).then((function(){n()})).catch((function(e){a(e)}))}))},e.prototype.getAllComponents=function(){return IMs.getAllComponentsOfPage(this.pageInstanceId)},e.prototype.getAllComponentsById=function(e){return IMs.getAllComponentsOfPage(this.pageInstanceId).filter((function(t){return t.componentId==e}))},e.prototype.getComponentByRef=function(e){return IMs.getAllComponentsOfPage(this.pageInstanceId).find((function(t){return t.ref==e}))},e.prototype.batchCreateComponent=function(e){var t=this;return new Promise((function(n,a){var o=e.map((function(e){return{pageId:t.pageId,pageInstanceId:t.pageInstanceId,pageVersion:t.pageVersion,componentId:e.id,componentRef:e.ref}}));NativePage.batchCreateComponentByData(o).then((function(a){var o=0,i=a.map((function(n){var a={pageId:t.pageId,pageInstanceId:t.pageInstanceId,pageVersion:t.pageVersion,componentId:n.componentId,componentInstanceId:n.componentInstanceId,componentVersion:n.componentVersion};return n.componentRef&&(a.ref=n.componentRef),e[o]&&(a.data=e[o].data),o++,new GaiaXJSComponentTarget(a)}));n(i)})).catch((function(e){a(e)}))}))},e.prototype.batchAddComponent=function(e){var t=this;return new Promise((function(n,a){var o=e.map((function(e){var n={pageId:t.pageId,pageInstanceId:t.pageInstanceId,pageVersion:t.pageVersion,componentId:e.componentId,componentInstanceId:e.componentInstanceId,componentVersion:e.componentVersion,data:e.getBoundData()};return e.ref&&(n.componentRef=e.ref),n}));NativePage.batchAddComponentByData(o).then((function(){e.forEach((function(e){IMs.insertComponent(e,t.pageInstanceId)})),n()})).catch((function(e){a(e)}))}))},e.prototype.batchReplaceComponent=function(e){var t=this;return new Promise((function(n,a){var o=e.map((function(e){var n={pageId:t.pageId,pageInstanceId:t.pageInstanceId,pageVersion:t.pageVersion,componentId:e.componentId,componentInstanceId:e.componentInstanceId,componentVersion:e.componentVersion,data:e.getBoundData()};return e.ref&&(n.componentRef=e.ref),n}));NativePage.batchReplaceComponentByData(o).then((function(){e.forEach((function(e){IMs.insertComponent(e,t.pageInstanceId)})),n()})).catch((function(e){a(e)}))}))},e.prototype.batchUpdateComponent=function(e){var t=this;return new Promise((function(n,a){var o=e.map((function(e){var n={pageId:t.pageId,pageInstanceId:t.pageInstanceId,pageVersion:t.pageVersion,componentId:e.componentId,componentInstanceId:e.componentInstanceId,componentVersion:e.componentVersion,data:e.getBoundData()};return e.ref&&(n.componentRef=e.ref),n}));NativePage.batchUpdateComponentByData(o).then((function(){n()})).catch((function(e){a(e)}))}))},e.prototype.batchRemoveComponent=function(e){var t=this;return new Promise((function(n,a){var o=e.map((function(e){var n={pageId:t.pageId,pageInstanceId:t.pageInstanceId,pageVersion:t.pageVersion,componentId:e.componentId,componentInstanceId:e.componentInstanceId,componentVersion:e.componentVersion};return e.ref&&(n.componentRef=e.ref),n}));NativePage.batchRemoveComponentByData(o).then((function(){n()})).catch((function(e){a(e)}))}))},e.prototype.removeAllComponents=function(){var e=this;return new Promise((function(t,n){var a=e.getAllComponents();e.batchRemoveComponent(a).then((function(){t()})).catch((function(e){n(e)}))}))},e.prototype.dispatchNativeEvent=function(e){if(null!=e){var t=getNativeListeners(this),n=e.type,a=t.get(n);if(null==a)return!0;"function"==typeof a.listener&&a.listener.call(this,e)}},e.prototype.addNativeEventListener=function(e,t){if(NativeEvent.addNativeEventListener({isPage:!0,instanceId:this.pageInstanceId,contextId:__globalThis.__CONTEXT_ID__,type:e})){var n=getNativeListeners(this);null!=n.get(e)&&n.delete(e);var a={listener:t,next:null};n.set(e,a)}},e.prototype.removeNativeEventListener=function(e){NativeEvent.removeNativeEventListener({isPage:!0,instanceId:this.pageInstanceId,contextId:__globalThis.__CONTEXT_ID__,type:e})&&getNativeListeners(this).delete(e)},e.prototype.setupActionBar=function(e,t){NativePage.setupActionBar({pageId:this.pageId,pageInstanceId:this.pageInstanceId,pageVersion:this.pageVersion,componentId:e,data:t})},e.prototype.presentModal=function(e){var t=this,n=__assign({pageId:this.pageId,pageInstanceId:this.pageInstanceId,pageVersion:this.pageVersion,bizId:this.bizId},e),a=new GaiaXJSModal(n);return this._modals.push(a),a.present().then((function(){})).catch((function(e){console.log(e),t._modals.splice(t._modals.indexOf(a),1)})),a},e.prototype.dismissModal=function(e){var t=this,n=this._modals.find((function(t){return t.modalId==e}));n.dismiss().then((function(){t._modals.splice(t._modals.indexOf(n),1)})).catch((function(e){console.log(e)}))},e.prototype.dispatchModalEvent=function(e){for(var t=0;t<this._modals.length;t++){var n=this._modals[t];n.modalId==e.modalId&&n.dispatchEvent(e)}},e.prototype.close=function(e){NativePage.closePage({pageId:this.pageId,pageInstanceId:this.pageInstanceId,pageVersion:this.pageVersion,params:e})},e}();function Page(e,t){e&&t&&"object"==typeof e&&"object"==typeof t&&IMs.insertPage(new __Page__(e,t))}var GaiaXJSWindow=function(){function e(){}return e.prototype.dispatchEventInternal=function(e){var t=new GaiaXJSEvent(e);return IMs.dispatchEvent(t),t},e.prototype.postMessage=function(e,t,n){if("string"==typeof e)return this.dispatchEventInternal(Object.assign({type:e||""},{userData:t}));if(e instanceof __Page__){var a=e;return this.dispatchEventInternal(Object.assign({type:t||"",templateId:a.pageId,instanceId:a.pageInstanceId},{userData:n}))}return this.dispatchEventInternal(e)},e.prototype.postNativeMessage=function(e){var t=new GaiaXJSEvent(e);IMs.dispatchNativeEvent(t)},e.prototype.postAnimationMessage=function(e){var t=new GaiaXJSEvent(e);timeline._dispatchAnimationEvent(t)},e.prototype.postModalMessage=function(e){var t=new GaiaXJSEvent(e);IMs.dispatchModalEvent(t)},e.prototype.postStickyMessage=function(e,t,n){var a=this.postMessage(e,t,n);sticky.registerStickyEvent(a.type,a)},e.prototype.removeStickyMessage=function(e){sticky.unregisterStickyEvent(new GaiaXJSEvent({type:e}))},e}();1!=__globalThis.__ENGINE_TYPE__&&10!=__globalThis.__ENGINE_TYPE__||(__globalThis.__successCallbacks=new Map,__globalThis.__failureCallbacks=new Map,__globalThis.__callbackId=0,__globalThis.__processCallbacks=function(e,t){return __globalThis.__successCallbacks.set(__globalThis.__callbackId,e),__globalThis.__failureCallbacks.set(__globalThis.__callbackId,t),__globalThis.__callbackId++});var Bridge=function(){function e(){}return e.callSync=function(e){if(null!=e&&e instanceof Object)return 1==__globalThis.__ENGINE_TYPE__||10==__globalThis.__ENGINE_TYPE__?GaiaXJSBridge.callSync(Object.assign({},e,{contextId:__globalThis.__CONTEXT_ID__})):GaiaXJSBridge.callSync(JSON.stringify(Object.assign({},e,{contextId:__globalThis.__CONTEXT_ID__})))},e.callAsync=function(e,t){if(null!=e&&e instanceof Object)if(1==__globalThis.__ENGINE_TYPE__||10==__globalThis.__ENGINE_TYPE__){var n=__globalThis.__processCallbacks&&__globalThis.__processCallbacks(t);GaiaXJSBridge.callAsync(Object.assign({},e,{contextId:__globalThis.__CONTEXT_ID__,callbackId:n}))}else GaiaXJSBridge.callAsync(JSON.stringify(Object.assign({},e,{contextId:__globalThis.__CONTEXT_ID__})),(function(e){t&&t(e)}))},e.callPromise=function(e){return new Promise((function(t,n){if(null!=e&&e instanceof Object)if(1==__globalThis.__ENGINE_TYPE__||10==__globalThis.__ENGINE_TYPE__){var a=__globalThis.__processCallbacks&&__globalThis.__processCallbacks(t,n);GaiaXJSBridge.callPromise(Object.assign({},e,{contextId:__globalThis.__CONTEXT_ID__,callbackId:a}))}else GaiaXJSBridge.callPromise(JSON.stringify(Object.assign({},e,{contextId:__globalThis.__CONTEXT_ID__}))).then((function(e){t(e)})).catch((function(e){n(e)}));else n(new Error("arguments is not valid"))}))},e.invokeCallback=function(e,t){if((1==__globalThis.__ENGINE_TYPE__||10==__globalThis.__ENGINE_TYPE__)&&null!=e){var n=__globalThis.__successCallbacks.get(e);n&&(n(t),__globalThis.__successCallbacks.delete(e),__globalThis.__failureCallbacks.delete(e))}},e.invokePromiseSuccess=function(e,t){if((1==__globalThis.__ENGINE_TYPE__||10==__globalThis.__ENGINE_TYPE__)&&null!=e){var n=__globalThis.__successCallbacks.get(e);n&&(n(t),__globalThis.__successCallbacks.delete(e),__globalThis.__failureCallbacks.delete(e))}},e.invokePromiseFailure=function(e,t){if((1==__globalThis.__ENGINE_TYPE__||10==__globalThis.__ENGINE_TYPE__)&&null!=e){var n=__globalThis.__failureCallbacks.get(e);n&&(n(t),__globalThis.__successCallbacks.delete(e),__globalThis.__failureCallbacks.delete(e))}},e}(),InstancesManager=function(){function e(){this.componentInstanceMaps={},this.pageInstanceMaps={},this.pageComponentMaps={}}return e.prototype.getAllComponents=function(){return Object.values(this.componentInstanceMaps)},e.prototype.getAllPages=function(){return Object.values(this.pageInstanceMaps)},e.prototype.getAllComponentsOfPage=function(e){var t=this,n=this.pageComponentMaps[e];return n?n.map((function(e){return t.componentInstanceMaps[e]})):[]},e.prototype.insertComponent=function(e,t){var n=this.componentInstanceMaps[e.componentInstanceId];n?n instanceof __Component__?Object.defineProperties(n,{__pageId__:{value:e.pageId,writable:!0},__pageInstanceId__:{value:e.pageInstanceId,writable:!0},__pageVersion__:{value:e.pageVersion,writable:!0},__componentId__:{value:e.componentId,writable:!0},__componentInstanceId__:{value:e.componentInstanceId,writable:!0},__componentVersion__:{value:e.componentVersion,writable:!0},__ref__:{value:e.ref,writable:!0},__data__:{value:e.getBoundData(),writable:!0}}):(Object.defineProperties(e,{__pageId__:{value:n.pageId,writable:!0},__pageInstanceId__:{value:n.pageInstanceId,writable:!0},__pageVersion__:{value:n.pageVersion,writable:!0},__componentId__:{value:n.componentId,writable:!0},__componentInstanceId__:{value:n.componentInstanceId,writable:!0},__componentVersion__:{value:n.componentVersion,writable:!0},__ref__:{value:n.ref,writable:!0},__data__:{value:n.getBoundData(),writable:!0}}),this.componentInstanceMaps[e.componentInstanceId]=e):this.componentInstanceMaps[e.componentInstanceId]=e,null!=t&&(null==this.pageComponentMaps[t]&&(this.pageComponentMaps[t]=[]),-1===this.pageComponentMaps[t].indexOf(e.componentInstanceId)&&this.pageComponentMaps[t].push(e.componentInstanceId))},e.prototype.insertPage=function(e){this.pageInstanceMaps[e.pageInstanceId]=e},e.prototype.getComponent=function(e){return this.componentInstanceMaps[e]},e.prototype.getPage=function(e){return this.pageInstanceMaps[e]},e.prototype.removeComponent=function(e){if(delete this.componentInstanceMaps[e.componentInstanceId],null!=e.pageInstanceId){var t=this.pageComponentMaps[e.pageInstanceId];if(t){var n=t.indexOf(e.componentInstanceId);n>-1&&t.splice(n,1)}}sticky.unregisterStickyEvent(new GaiaXJSEvent({instanceId:e.componentInstanceId,templateId:e.componentId}))},e.prototype.removePage=function(e){var t=e.pageInstanceId;if(null!=t){var n=this.pageComponentMaps[t];if(n)for(var a=0;a<n.length;a++){var o=n[a];delete this.componentInstanceMaps[o]}delete this.pageInstanceMaps[t],sticky.unregisterStickyEvent(new GaiaXJSEvent({instanceId:t,templateId:e.pageId}))}},e.prototype.dispatchNativeEvent=function(e){if(e.isPage){var t=this.getPage(e.instanceId);try{t&&t.dispatchNativeEvent(e)}catch(a){console.error({templateId:t.pageId,templateVersion:t.pageVersion,instanceId:t.pageInstanceId,bizId:t.bizId,message:a.message,stack:a.stack})}}else{var n=this.getComponent(e.instanceId);try{n&&n.dispatchNativeEvent(e)}catch(a){console.error({templateId:n.componentId,templateVersion:n.componentVersion,instanceId:n.componentInstanceId,bizId:n.bizId,message:a.message,stack:a.stack})}}},e.prototype.dispatchModalEvent=function(e){if(e&&e instanceof GaiaXJSEvent&&null!=e.instanceId){var t=this.getPage(e.instanceId);try{t&&t.dispatchModalEvent(e)}catch(n){console.error({templateId:t.pageId,templateVersion:t.pageVersion,instanceId:t.pageInstanceId,bizId:t.bizId,message:n.message,stack:n.stack})}}},e.prototype.dispatchEvent=function(e){if(e&&e instanceof GaiaXJSEvent)if(null!=e.instanceId&&null!=e.templateId){if(s=this.getComponent(e.instanceId))try{s instanceof __Component__&&s.dispatchEvent(e)}catch(r){console.error({templateId:s.componentId,templateVersion:s.componentVersion,instanceId:s.componentInstanceId,bizId:s.bizId,message:r.message,stack:r.stack})}else if(i=this.getPage(e.instanceId))try{i instanceof __Page__&&i.dispatchEvent(e);for(var t=this.getAllComponentsOfPage(i.pageInstanceId),n=0;t&&n<t.length;n++){var a=t[n];try{a&&a instanceof __Component__&&a.dispatchEvent(e)}catch(r){console.error({templateId:a.componentId,templateVersion:a.componentVersion,instanceId:a.componentInstanceId,bizId:a.bizId,message:r.message,stack:r.stack})}}}catch(r){console.error({templateId:i.pageId,templateVersion:i.pageVersion,instanceId:i.pageInstanceId,bizId:i.bizId,message:r.message,stack:r.stack})}}else{var o=this.getAllPages();if(o)for(n=0;n<o.length;n++){var i=o[n];try{i&&i.dispatchEvent(e)}catch(r){console.error({templateId:i.pageId,templateVersion:i.pageVersion,instanceId:i.pageInstanceId,bizId:i.bizId,message:r.message,stack:r.stack})}}if(t=this.getAllComponents())for(n=0;n<t.length;n++){var s=t[n];try{s&&s instanceof __Component__&&s.dispatchEvent(e)}catch(r){console.error({templateId:s.componentId,templateVersion:s.componentVersion,instanceId:s.componentInstanceId,bizId:s.bizId,message:r.message,stack:r.stack})}}}},e}(),__Console=function(){function e(){}return e.info=function(e){NativeLogger.info({data:e})},e.log=function(e){NativeLogger.log({data:e})},e.warn=function(e){NativeLogger.warn({data:e})},e.error=function(e){NativeLogger.error({data:e})},e}(),__Utils=function(){function e(){}return e.isNonNullObject=function(e){return!!e&&"object"==typeof e},e.isSpecial=function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t},e.isMergeableObject=function(t){return e.isNonNullObject(t)&&!e.isSpecial(t)},e.emptyTarget=function(e){return Array.isArray(e)?[]:{}},e.cloneUnlessOtherwiseSpecified=function(t,n){return!1!==n.clone&&n.isMergeableObject(t)?e.merge(e.emptyTarget(t),t,n):t},e.defaultArrayMerge=function(t,n,a){return t.concat(n).map((function(t){return e.cloneUnlessOtherwiseSpecified(t,a)}))},e.getMergeFunction=function(t,n){if(!n.customMerge)return e.merge;var a=n.customMerge(t);return"function"==typeof a?a:e.merge},e.getEnumerableOwnPropertySymbols=function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]},e.getKeys=function(t){return Object.keys(t).concat(e.getEnumerableOwnPropertySymbols(t))},e.propertyIsOnObject=function(e,t){try{return t in e}catch(n){return!1}},e.propertyIsUnsafe=function(t,n){return e.propertyIsOnObject(t,n)&&!(Object.hasOwnProperty.call(t,n)&&Object.propertyIsEnumerable.call(t,n))},e.mergeObject=function(t,n,a){var o={};return a.isMergeableObject(t)&&e.getKeys(t).forEach((function(n){o[n]=e.cloneUnlessOtherwiseSpecified(t[n],a)})),e.getKeys(n).forEach((function(i){e.propertyIsUnsafe(t,i)||(e.propertyIsOnObject(t,i)&&a.isMergeableObject(n[i])?o[i]=e.getMergeFunction(i,a)(t[i],n[i],a):o[i]=e.cloneUnlessOtherwiseSpecified(n[i],a))})),o},e.merge=function(t,n,a){(a=a||{}).arrayMerge=a.arrayMerge||e.defaultArrayMerge,a.isMergeableObject=a.isMergeableObject||e.isMergeableObject,a.cloneUnlessOtherwiseSpecified=e.cloneUnlessOtherwiseSpecified;var o=Array.isArray(n);return o===Array.isArray(t)?o?a.arrayMerge(t,n,a):e.mergeObject(t,n,a):e.cloneUnlessOtherwiseSpecified(n,a)},e.mergeAll=function(t,n){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,a){return e.merge(t,a,n)}),{})},e.md5=function(e){if(e)return NativeUtil.md5(e)},e.urlEncode=function(e){if(e)return NativeUtil.urlEncode(e)},e.urlDecode=function(e){if(e)return NativeUtil.urlDecode(e)},e.base64Encode=function(e){if(e)return NativeUtil.base64Encode(e)},e.base64Decode=function(e){if(e)return NativeUtil.base64Decode(e)},e}(),GaiaXJSAPlusAdapter=function(){function e(e){this.isPageAppear=!1,this.isPageDisAppear=!0,this.spmAB=[],this.spmUrl="",this.spmPre="",this.pageName=e.pageName||"",this.pageMap=new WeakMap,this.pageMap.set(this,e.page),this.gmMaps={CLK:{name:"click",alias:"CLK",id:"2101"},EXP:{name:"expose",alias:"EXP",id:"2201"},IMPEXP:{name:"expose",alias:"IMPEXP",id:"2202"},OTHER:{name:"other",alias:"OTHER",id:"19999"}}}return Object.defineProperty(e.prototype,"page",{get:function(){return this.pageMap.get(this)},enumerable:!1,configurable:!0}),e.prototype.getPageSPM=function(){return this.spmAB},e.prototype.getPageSPMStr=function(e,t){return this.spmAB.join(".")},e.prototype.setPageSPM=function(e,t){this.spmAB=[e,t],this.pageName=""},e.prototype.getGmObj=function(e){return this.gmMaps[e]||this.gmMaps.OTHER},e.prototype._updateNextPageSpm=function(e){e&&(this.spmPre=this.spmUrl,this.spmUrl=e["spm-url"]||e.spmUrl)},e.prototype._getRecordParams=function(e,t,n){var a=n||"",o=this.getGmObj(t),i={jsver:"gaiaxjs-aplus",lver:"0.1.0",weex:"0",functype:"",funcId:"",_toUT:"2",logkey:e,gokey:"string"==typeof a?encodeURIComponent(a):encodeURIComponent(this.objToParams(a,!1)),gmkey:o.alias,urlpagename:this.pageName,url:""},s=this.getPageSPMStr("record",i);return s&&"0.0"!==s&&(i["spm-cnt"]=s+".0.0"),{pageName:this.pageName,gmObj:o,arg1:e,arg2:"",arg3:"",args:i}},e.prototype._getEnterParams=function(e,t){var n=e||{},a=t||{},o="0",i="0",s=(a=Object.assign({},t,{functype:"page",funcId:"2001",isonepage:1,scr:o+"x"+i,jsver:"gaiaxjs-aplus",lver:"0.0.1",weex:"0",_toUT:"2"}),t.scm||"");s&&(t.scm=s);var r=e.pageId?"/"+e.pageId:"",c=this.getPageSPMStr("enter",t);return c&&"0.0"!==c&&(t["spm-cnt"]=c+""+r+".0.0"),this.spmUrl=n.spmUrl||n["spm-url"]||this.spmUrl||"",this.spmUrl&&(t["spm-url"]=this.spmUrl),this.spmPre=n.spmPre||n["spm-pre"]||this.spmPre||"",this.spmPre&&(a["spm-pre"]=this.spmPre),this.pageName=n.pageName||"",{pageName:this.pageName,args:a}},e.prototype.getUserInjectGokey=function(e){return e.gokey},e.prototype.getPageInfo=function(){var e=this.page;if(e)return{pageInstanceId:e.pageInstanceId}},e.prototype.skipPage=function(){NativeAPlusAdapter.aplus_skipPage(this.getPageInfo())},e.prototype.pageAppear=function(){this.isPageDisAppear&&(this.isPageDisappear=!1,this.isPageAppear=!0,NativeAPlusAdapter.aplus_pageAppear(this.getPageInfo()))},e.prototype.pageDisappear=function(){this.isPageAppear&&(this.isPageAppear=!1,this.isPageDisappear=!0,NativeAPlusAdapter.aplus_pageDisAppear(this.getPageInfo()))},e.prototype.updatePageUtparam=function(e){"object"==typeof e&&NativeAPlusAdapter.aplus_updatePageUtparam(JSON.stringify(e),this.getPageInfo())},e.prototype.updateNextPageProperties=function(e){NativeAPlusAdapter.aplus_commitut("updateNextProp",-1,"","","","","",e,this.getPageInfo())},e.prototype.record=function(e,t,n){var a=this.getUserInjectGokey({logkey:e,gmkey:t,gokey:n}),o=this._getRecordParams(e,t,a),i=o.gmObj||{};NativeAPlusAdapter.aplus_customAdvance(o.pageName,i.id,o.arg1,o.arg2,o.arg3,o.args,this.getPageInfo())},e.prototype.enter=function(e,t){var n=e||{},a=t||{},o=this._getEnterParams(n,a),i=o.args||{};NativeAPlusAdapter.aplus_commit("enter",o.pageName,i.url,i,this.getPageInfo())},e.prototype.objToParams=function(e,t){var n=[];for(var a in e){var o=a,i=t?encodeURIComponent(e[a]):e[a];n.push(o+"="+i)}return n.join("&")},e.prototype.paramsToObj=function(e){for(var t={},n=("string"==typeof e?e:"").split("&"),a=0;a<n.length;a++){var o=n[a],i=o.split("="),s=i[0],r="";if(2===i.length)r=i[1];else if(i.length>2){var c=o.indexOf("=");r=o.slice(c+1)}s&&(t[s]=r)}return t},e}(),GaiaXJSLog2APlus=function(){function e(e){this.spmMap={},this.traceId="",this.logkey=e.logkey||"",this.aplus=new GaiaXJSAPlusAdapter(e)}return e.prototype.isEmptyStr=function(e){return!e||0===e.length},e.prototype.clearExp=function(){if(this.spmMap)for(var e in this.spmMap)delete this.spmMap[e]},e.prototype.clearExpBySpm=function(e){this.spmMap[e]=null},e.prototype.sendPV=function(e,t,n,a,o){void 0===a&&(a={}),void 0===o&&(o=!0),o&&this.aplus.pageDisappear&&this.aplus.pageDisappear();var i=__assign({},a);this.isEmptyStr(i.trace_id)?this.isEmptyStr(this.traceId)||(i.trace_id=this.traceId):this.traceId=i.trace_id,this.aplus.pageAppear(),this.aplus.setPageSPM(t,n),this.aplus.enter({pageName:e,isonepage:!0},i),this.aplus.pageDisappear(),this.aplus.updateNextPageProperties({"spm-url":t+"."+n+".0.0"})},e.prototype.sendExp=function(e,t){var n=Object.assign({},e||{},this.getActionParams(t));n&&"object"==typeof n.track_info&&(n.track_info=JSON.stringify(n.track_info)),n.spm&&this.isEmptyStr(this.spmMap[n.spm])&&(this.spmMap[n.spm]="true",this.aplus.record(this.logkey,"EXP",this.objToQueryString(n)))},e.prototype.sendClick=function(e,t){var n=Object.assign({},e||{},this.getActionParams(t));n&&"object"==typeof n.track_info&&(n.track_info=JSON.stringify(n.track_info)),this.aplus.record(this.logkey,"CLK",this.objToQueryString(n))},e.prototype.getActionParams=function(e){var t={};return e&&e.report&&(t.spm=e.report.spmAB+"."+e.report.spmC+"."+e.report.spmD,t.scm=e.report.scmAB+"."+e.report.scmC+"."+e.report.scmD,e.report.trackInfo&&(t.track_info=JSON.stringify(e.report.trackInfo)),this.isEmptyStr(this.traceId)||(t.trace_id=this.traceId)),t},e.prototype.objToQueryString=function(e){return Object.keys(e).map((function(t){return"".concat(t,"=").concat(e[t])})).join("&")},e}(),GaiaXJSLog2Alarm=function(){function e(e){this.traceId="",this.options={biz_type:e.bizType||"",client_code:e.clientCode||"",client_msg:e.clientMsg||""}}return e.prototype.alarmEvent=function(e,t){return this.alarm(e,t)},e.prototype.alarmEventWithPreDesc=function(e,t,n){return this.alarmWithPreDesc(e,t,n)},e.prototype.alarm=function(e,t){return this.alarmWithPreDesc(e,"",t)},e.prototype.alarmWithPreDesc=function(e,t,n){var a=this;return void 0===t&&(t=""),new Promise((function(o,i){var s={client_msg:n,trace_id:a.traceId||"",extend:a.extend},r=t+" "+JSON.stringify(s),c=gaiax.mtop2;null==c&&(c=gaiax.mtop),c("mtop.youku.aio.collector.alarm",{api_version:"1.0",method:"POST",body:{req:JSON.stringify(__assign(__assign({},a.options),{client_code:String(e),client_msg:r}))}}).then((function(e){o(e)})).catch((function(e){i(e)}))}))},e}(),GaiaXJSStickyEventManager=function(){function e(){this.stickyEventMap=new Map}return e.prototype.registerStickyEvent=function(e,t){var n=this.stickyEventMap.get(e);null==n&&(n=[]),n.push(t),this.stickyEventMap.set(e,n)},e.prototype.getStickyEvent=function(e){return this.stickyEventMap.get(e)},e.prototype.unregisterStickyEvent=function(e){var t=this,n=this.stickyEventMap.get(e.type);if(null!=n&&n.length>0){for(var a=0;a<n.length;){n[a];null!=e.instanceId&&e.instanceId==n[a].instanceId||e.type==n[a].type?(n.splice(a,1),a=0):a++}0==n.length&&this.stickyEventMap.delete(e.type)}else this.stickyEventMap.forEach((function(n,a){for(var o=0;n&&o<n.length;){var i=n[o];null!=e.instanceId&&e.instanceId==i.instanceId||e.type==i.type?(n.splice(o,1),o=0):o++}n&&0==n.length&&t.stickyEventMap.delete(a)}))},e}();__globalThis.__VERSION__=1,__globalThis.__WEB_ANIMATION_ID__=0,__globalThis.__LOTTIE_ANIMATION_ID__=0,__globalThis.__MODAL_ID__=0,__globalThis.Event=GaiaXJSEvent,__globalThis.EventTarget=GaiaXJSEventTarget,__globalThis.Component=Component,__globalThis.Page=Page,__globalThis.Log2APlus=GaiaXJSLog2APlus,__globalThis.Log2Alarm=GaiaXJSLog2Alarm,10!=__globalThis.__ENGINE_TYPE__&&(__globalThis.console=__Console),__globalThis.IMs=new InstancesManager,__globalThis.window=new GaiaXJSWindow,__globalThis.timeline=new GaiaXJSAnimationTimeline,__globalThis.Utils=__Utils,__globalThis.GaiaXJSGroupEffect=GaiaXJSGroupEffect,__globalThis.GaiaXJSSequenceEffect=GaiaXJSSequenceEffect,__globalThis.GaiaXJSKeyframeEffect=GaiaXJSKeyframeEffect,__globalThis.sticky=new GaiaXJSStickyEventManager,__globalThis.require=__gaiaxjs_require__;